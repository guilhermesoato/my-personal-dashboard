<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Meu Painel de Controle</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f4f4f9; margin: 0; padding: 20px; color: #333; }
        .container { max-width: 1200px; margin: auto; }
        .widgets-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; }
        .widget { background-color: #fff; border-radius: 8px; padding: 20px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .widget h2 { margin-top: 0; }
        .news-list { list-style: none; padding: 0; }
        .news-list li { margin-bottom: 15px; border-bottom: 1px solid #eee; padding-bottom: 15px; }
        .news-list li:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
        .news-list a { text-decoration: none; color: #0056b3; font-weight: bold; }
        .news-list .source { font-size: 0.9em; color: #555; }
    </style>
</head>
<body>
    <div class="container">
        <h1>Olá, {{ usuario }}!</h1>
        <p>Este é o seu painel de controle pessoal.</p>
        
        <div class="widgets-grid">
            
            <div class="widget">
                <h2>Clima em Brasília</h2>
                {% if weather %}
                    <p style="font-size: 2em; margin: 10px 0;">{{ weather.main.temp|floatformat:0 }} °C</p>
                    <p style="text-transform: capitalize;">{{ weather.weather.0.description }}</p>
                    <p>Sensação térmica: {{ weather.main.feels_like|floatformat:0 }} °C</p>
                {% else %}
                    <p>Não foi possível carregar os dados do clima.</p>
                {% endif %}
            </div>

            <div class="widget">
                <h2>Últimas Notícias</h2>
                {% if news.articles %}
                    <ul class="news-list">
                        {% for article in news.articles %}
                            <li>
                                <a href="{{ article.url }}" target="_blank">{{ article.title }}</a>
                                <div class="source">{{ article.source.name }}</div>
                            </li>
                        {% empty %}
                            <li>Nenhuma notícia encontrada.</li>
                        {% endfor %}
                    </ul>
                {% else %}
                    <p>Não foi possível carregar as notícias no momento.</p>
                {% endif %}
            </div>

            <div class="widget">
                <h2>Cotações Atuais</h2>
                {% if quotes %}
                    <ul class="news-list"> <li>
                            <a href="#">{{ quotes.USDBRL.name }}</a>
                            <div class="source">R$ {{ quotes.USDBRL.bid|floatformat:2 }}</div>
                        </li>
                        <li>
                            <a href="#">{{ quotes.EURBRL.name }}</a>
                            <div class="source">R$ {{ quotes.EURBRL.bid|floatformat:2 }}</div>
                        </li>
                        <li>
                            <a href="#">{{ quotes.BTCBRL.name }}</a>
                            <div class="source">R$ {{ quotes.BTCBRL.bid|floatformat:3 }}</div>
                        </li>
                    </ul>
                {% else %}
                    <p>Não foi possível carregar as cotações no momento.</p>
                {% endif %}
            </div>

        </div>
    </div>
</body>
</html>